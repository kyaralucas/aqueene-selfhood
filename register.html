<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Register — Exhibition Opening</title>
    <meta
      name="description"
      content="Register for a timeslot for the exhibition opening."
    />

    <!-- Open Sans -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <a class="skip-link" href="#main">Skip to content</a>

    <header class="hero hero--compact" role="banner">
      <div class="hero__bg" aria-hidden="true"></div>
      <div class="hero__veil hero__veil--soft" aria-hidden="true"></div>

      <div class="hero__content">
        <div class="hero__topline">
          <p class="hero__meta">AQUEENE WILSON</p>
          <p class="hero__meta hero__meta--right">SELFHOOD ACT II</p>
        </div>

        <main id="main" class="hero__center hero__center--compact">
            
          <!-- <h1 class="hero__title hero__title--small">
            <span>CHOOSE</span>
            <span>YOUR</span>
            <span>MOMENT</span>
          </h1> -->

          <img class="hero__logo" src="ora_mi_topa_mi_mes.svg" alt="Ora Mi Topa Mi Mes">
          <p class="hero__meta">
            <span class="hero__kicker">Opening Exhibition</span>
            <span class="hero__date">20 February 2026 · 19:00 - 21:00</span>
            <span class="hero__place">
                Sentro · St. Rosaweg 13 · Willemstad, Curaçao
            </span>
        </p>

          <p class="hero__fineprint hero__fineprint--tight">
            Registration is free. Limited capacity per timeslot to keep the experience soft and unrushed.
          </p>

          <!-- Stepper -->
          <div class="stepper" aria-label="Registration progress">
            <div class="stepper__item stepper__item--active" id="stepDot1">
              <span class="stepper__dot" aria-hidden="true"></span>
              <span class="stepper__label">Details</span>
            </div>
            <div class="stepper__line" aria-hidden="true"></div>
            <div class="stepper__item" id="stepDot2">
              <span class="stepper__dot" aria-hidden="true"></span>
              <span class="stepper__label">Timeslot</span>
            </div>
          </div>

          <!-- Form card -->
          <section class="glass" aria-label="Registration form">
            <form id="regForm" novalidate>
              <!-- STEP 1 -->
              <div class="step step--active" id="step1">
                <label class="field">
                  <span class="field__label">Name</span>
                  <input
                    class="field__input"
                    type="text"
                    name="name"
                    autocomplete="name"
                    placeholder="Your name"
                    required
                  />
                  <span class="field__hint" id="nameHint"></span>
                </label>

                <label class="field">
                  <span class="field__label">Email</span>
                  <input
                    class="field__input"
                    type="email"
                    name="email"
                    autocomplete="email"
                    placeholder="you@email.com"
                    required
                  />
                  <span class="field__hint" id="emailHint"></span>
                </label>

                <label class="field">
                    <span class="field__label" id="restPrompt">How do you recharge? (Optional)</span>
                    <textarea
                      class="field__input field__input--area"
                      name="restWord"
                      rows="4"
                      placeholder="One word or a short phrase. Will be added anonymously to digital resting space."
                    ></textarea>
                  </label>
                  

                <div class="actions">
                  <a class="btn btn--ghost btn--full" href="index.html">Back to home</a>
                  <button class="btn btn--primary btn--full" type="button" id="nextBtn">
                    Next
                  </button>
                </div>
              </div>

              <!-- STEP 2 -->
              <div class="step" id="step2" aria-live="polite">
                <p class="mini-title" id="welcomeLine"></p>

                <fieldset class="slotset">
                  <legend class="slotset__legend">Select a timeslot</legend>

                  <label class="slot">
                    <input class="slot__radio" type="radio" name="slot" value="19:00" required />
                    <span class="slot__card">
                      <span class="slot__time">19:00</span>
                      <!-- <span class="slot__note">Soft arrival</span> -->
                    </span>
                  </label>

                  <label class="slot">
                    <input class="slot__radio" type="radio" name="slot" value="19:20" />
                    <span class="slot__card">
                      <span class="slot__time">19:20</span>
                      <!-- <span class="slot__note">Breath &amp; settle</span> -->
                    </span>
                  </label>

                  <label class="slot">
                    <input class="slot__radio" type="radio" name="slot" value="19:40" />
                    <span class="slot__card">
                      <span class="slot__time">19:40</span>
                      <!-- <span class="slot__note">Slow looking</span> -->
                    </span>
                  </label>

                  <label class="slot">
                    <input class="slot__radio" type="radio" name="slot" value="20:00" />
                    <span class="slot__card">
                      <span class="slot__time">20:00</span>
                      <!-- <span class="slot__note">Last light</span> -->
                    </span>
                  </label>

                  <p class="field__hint" id="slotHint">Choose one slot to continue.</p>
                </fieldset>

                <div class="actions">
                  <button class="btn btn--ghost btn--full" type="button" id="backBtn">
                    Back
                  </button>
                  <button class="btn btn--primary btn--full" type="submit" id="submitBtn">
                    Submit
                  </button>
                </div>

                
              </div>

                        <!-- STEP 3 (Confirmation) -->
            <div class="step" id="step3" aria-live="polite">
                <div class="confirm confirm--full">
                <h2 class="confirm__title">YOU'RE REGISTERED</h2>
                <p class="confirm__text" id="confirmText"></p>
            
                <div class="actions actions--single">
                    <a class="btn btn--primary btn--full" href="resting-space.html">Visit digital resting space</a>
                    <a class="btn btn--ghost btn--full" href="index.html">Back to home</a>
                </div>
                </div>
            </div>
  

            </form>
          </section>

        </main>
      </div>
    </header>

    <script>

        const prompts = [
            "What are some ways that you can grant yourself the rest you deserve?",
            "What is your rest plan?",
            "Who are you when you are not working?",
            "In what way do others show up for your softness?",
            "What does a life without taking care of others look like?",
            "How do you recharge?"
        ];

        const promptEl = document.getElementById("restPrompt");
        if (promptEl) {
        const randomPrompt = prompts[Math.floor(Math.random() * prompts.length)];
        promptEl.textContent = `${randomPrompt} (Optional)`;
        }



      function setStep(stepNumber) {
        const steps = [$("#step1"), $("#step2"), $("#step3")].filter(Boolean);

        steps.forEach((el) => el.classList.remove("step--active"));
        const target = $("#step" + stepNumber);
        if (target) target.classList.add("step--active");

        // Stepper dots (only shows 1 & 2 in UI, but that’s fine)
        const d1 = $("#stepDot1");
        const d2 = $("#stepDot2");
        if (d1 && d2) {
            if (stepNumber === 1) {
            d1.classList.add("stepper__item--active");
            d2.classList.remove("stepper__item--active");
            } else {
            d1.classList.remove("stepper__item--active");
            d2.classList.add("stepper__item--active");
            }
  }
}


      function validEmail(email) {
        // Simple, friendly validation (not overly strict)
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.trim());
      }

      $("#nextBtn").addEventListener("click", () => {
        const name = $("#regForm").elements["name"].value.trim();
        const email = $("#regForm").elements["email"].value.trim();
        const restWord = $("#regForm").elements["restWord"].value.trim();

        // validate
        let ok = true;

        if (!name) {
          $("#nameHint").textContent = "Please enter your name.";
          ok = false;
        } else {
          $("#nameHint").textContent = "✓";
        }

        if (!email || !validEmail(email)) {
          $("#emailHint").textContent = "Please enter a valid email.";
          ok = false;
        } else {
          $("#emailHint").textContent = "✓";
        }

        if (!ok) return;

        // Personal welcome line (only on-device)
        $("#welcomeLine").textContent = `Welcome, ${name}. Choose a timeslot to enter the exhibition space.`;

        setStep(2);
        // small focus assist
        const firstRadio = document.querySelector('input[name="slot"]');
        if (firstRadio) firstRadio.focus({ preventScroll: true });
      });

      $("#backBtn").addEventListener("click", () => setStep(1));

      $("#regForm").addEventListener("submit", (e) => {
        e.preventDefault();

        const form = e.currentTarget;
        const name = form.elements["name"].value.trim();
        const email = form.elements["email"].value.trim();
        const slot = form.elements["slot"].value;

        if (!slot) {
          $("#slotHint").textContent = "Please select a timeslot.";
          return;
        }
        $("#slotHint").textContent = "";

        // Store a local “registration” (for design/testing)
        const payload = {
          name,
          email,
          slot,
          createdAt: new Date().toISOString(),
        };

        let regs = [];
        try {
          regs = JSON.parse(localStorage.getItem(STORAGE_KEY_SUBS) || "[]");
        } catch {
          regs = [];
        }
        regs.push(payload);
        localStorage.setItem(STORAGE_KEY_SUBS, JSON.stringify(regs));

        // Show confirmation UI
        $("#confirmText").textContent = `You selected ${slot} to enter the exhibition space. 
        After your visit, you're warmly welcome to stay. Drinks and snacks are available in the adjacent room, 
        and you can linger there as long as you like. The timeslots only apply to the exhibition space itself.`;
        setStep(3);
        document.querySelector("#step3")?.scrollIntoView({ behavior: "smooth", block: "start" });

      });
    </script>
  </body>
</html>
